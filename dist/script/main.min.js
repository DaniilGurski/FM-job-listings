const offerItemTemplate=document.getElementById("job-offer-template"),jobListings=document.querySelector(".job-listings"),clearBtn=document.querySelector("#clear-filters-btn"),filterList=document.querySelector(".filter-bar__filter-tags");function updateOfferList(){const t=[];if(Array.from(filterList.children).forEach((e=>{t.push(e.dataset.tag)})),0!==t.length)for(let e of jobListings.querySelectorAll(".job-listings > li")){const n=e.dataset.tagGroup.split(" ").some((e=>t.includes(e)));e.classList.toggle("none",!n)}else jobListings.querySelectorAll(".none").forEach((t=>{t.classList.remove("none")}))}function addToFilterBar(t){const e=t.currentTarget.textContent;if(filterList.querySelector(`[data-tag='${e}']`))return;const n=document.createElement("li");n.classList.add("tag"),n.dataset.tag=e,n.insertAdjacentHTML("afterbegin",`\n    ${e}\n    <button class="button tag__close-btn">\n        <span class="visually-hidden">remove tag</span>\n        <img src="dist/img/icon-remove.svg" alt="">\n    </button>\n    `),filterList.appendChild(n);n.querySelector("button").addEventListener("click",(()=>{n.remove(),updateOfferList()})),updateOfferList()}function createOfferItem(t){const e=offerItemTemplate.content.cloneNode(!0),n=e.getElementById("recruiter-logo"),o=e.getElementById("recruiter-top"),r=e.getElementById("job-position"),a=e.getElementById("job-additional"),i=e.getElementById("job-tags"),{new:s,featured:l,logo:c,company:d,position:f,postedAt:u,contract:g,location:m,languages:p,tools:L}=t;if(s){const t=document.createElement("span");t.classList.add("job-offer__info-tag"),t.classList.add("job-offer__info-tag--accent"),t.textContent="NEW!",o.appendChild(t)}if(l){const t=document.createElement("span");t.classList.add("job-offer__info-tag"),t.textContent="FEATURED",t.setAttribute("data-featured-offer",""),o.appendChild(t)}n.src=c,o.insertAdjacentHTML("afterbegin",d),r.textContent=f;for(let t of[u,g,m]){const e=document.createElement("li");e.textContent=t,a.appendChild(e)}for(let t of[...p,...L]){if(0===t.length)continue;const e=document.createElement("li"),n=document.createElement("button");n.textContent=t,n.classList.add("button"),n.classList.add("tag"),n.addEventListener("click",addToFilterBar),e.appendChild(n),i.appendChild(e)}e.firstElementChild.setAttribute("data-tag-group",[...p,...L].join(" ")),jobListings.appendChild(e)}function clearAllFilters(){for(;filterList.firstChild;)filterList.firstChild.remove();updateOfferList()}clearBtn.addEventListener("click",clearAllFilters),fetch("/data.json").then((t=>{if(t.ok)return t.json();throw new Error("Response was not recived !")})).then((t=>{t.forEach((t=>{createOfferItem(t)}))})).catch((t=>{console.error(t)}));