const offerItemTemplate=document.getElementById("job-offer-template"),jobListings=document.querySelector(".job-listings"),clearBtn=document.querySelector("#clear-filters-btn"),filterList=document.querySelector(".filter-bar__filter-tags");function updateOfferList(){const e=[];if(Array.from(filterList.children).forEach((t=>{e.push(t.dataset.tag)})),0!==e.length)for(let t of jobListings.querySelectorAll(".job-listings > li")){const o=t.dataset.tagGroup.split(" ").some((t=>e.includes(t)));t.classList.toggle("none",!o)}else jobListings.querySelectorAll(".none").forEach((e=>{e.classList.remove("none")}))}function addToFilterBar(e){const t=e.currentTarget.textContent;if(filterList.querySelector(`[data-tag='${t}']`))return;const o=document.createElement("li");o.classList.add("tag"),o.dataset.tag=t,o.insertAdjacentHTML("afterbegin",`\n    ${t}\n    <button class="button tag__close-btn">\n        <span class="visually-hidden">remove tag</span>\n        <img src="dist/img/icon-remove.svg" alt="">\n    </button>\n    `),filterList.appendChild(o);o.querySelector("button").addEventListener("click",(()=>{o.remove(),updateOfferList()})),updateOfferList()}function createOfferItem(e){const t=offerItemTemplate.content.cloneNode(!0),o=t.querySelector(".job-offer__recruiter-photo"),n=t.querySelector(".job-offer__recruiter"),r=t.querySelector(".job-offer__position"),i=t.querySelector(".job-offer__additional"),a=t.querySelector(".job-offer__filters"),{new:s,featured:l,logo:c,company:f,position:d,postedAt:u,contract:m,location:p,role:g,level:b,languages:L,tools:h}=e;if(s){const e=document.createElement("span");e.classList.add("job-offer__info-tag"),e.classList.add("job-offer__info-tag--accent"),e.textContent="NEW!",n.appendChild(e)}if(l){const e=document.createElement("span");e.classList.add("job-offer__info-tag"),e.textContent="FEATURED",e.setAttribute("data-featured-offer",""),n.appendChild(e)}o.src=c,n.insertAdjacentHTML("afterbegin",f),r.textContent=d;for(let e of[u,m,p]){const t=document.createElement("li");t.textContent=e,i.appendChild(t)}for(let e of[g,b,...L,...h]){if(0===e.length)continue;const t=document.createElement("li"),o=document.createElement("button");o.textContent=e,o.classList.add("button"),o.classList.add("tag"),o.addEventListener("click",addToFilterBar),t.appendChild(o),a.appendChild(t)}t.firstElementChild.setAttribute("data-tag-group",[g,b,...L,...h].join(" ")),jobListings.appendChild(t)}function clearAllFilters(){for(;filterList.firstChild;)filterList.firstChild.remove();updateOfferList()}clearBtn.addEventListener("click",clearAllFilters),fetch("/data.json").then((e=>{if(e.ok)return e.json();throw new Error("Response was not recived !")})).then((e=>{e.forEach((e=>{createOfferItem(e)}))})).catch((e=>{console.error(e)}));